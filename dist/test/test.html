<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
</head>
<body>

<iframe id="upload_target" name="upload_target" src="upload1.php" style="width:0;heigth:0;overflow:hidden;border:0;position: absolute; left:-500px;"></iframe>
<img id="tag_img" src="http://avatar.csdn.net/C/2/1/1_shenlingsuifeng.jpg" />
<form enctype="multipart/form-data" action="upload1.php" method="post" target="upload_target">
    <input type="file" id="fileipt" name="userfile" class="file" value=""  />
    <input type="submit" name="uploadimg" value="上传" id="submit" hidden />
</form>

<script type='text/javascript'>
    var lastFileName;
    $("#fileipt").change(function() {
        var fileName = $(this).val();
        var pos = fileName.lastIndexOf("\\");
        fileName = fileName.substr(pos+1, fileName.length);  // 截取出文件名 因为会带路径
        lastFileName = fileName;
        $("#submit").click();
    });

    function stopSend($url) {
        $("#tag_img").attr("src",$url);
    }

</script>

</body>
</html>